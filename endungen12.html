<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Russisch √úbung: Endungen erg√§nzen (–î–õ–Ø)</title>
    <style>
        :root {
            /* Gr√ºnes Farbschema */
            --primary-color: #2e7d32;   /* Dunkelgr√ºn */
            --secondary-color: #66bb6a; /* Hellgr√ºn */
            --accent-color: #a5d6a7;    /* Sehr helles Gr√ºn */
            --bg-color: #f1f8e9;        /* Hintergrund */
            --text-color: #333;
            --white: #ffffff;
            --error: #e53935;           /* Rot f√ºr Fehler */
            --success: #43a047;         /* Gr√ºn f√ºr Richtig */
            
            --card-radius: 12px;
            --btn-size: 50px;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            padding-bottom: 100px; /* Platz f√ºr Footer */
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            background-color: var(--primary-color);
            color: var(--white);
            padding: 20px;
            border-radius: var(--card-radius);
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        h1 { margin: 0; font-size: 1.8rem; }
        .subtitle { margin-top: 5px; opacity: 0.9; font-weight: 300; }

        /* GRID LAYOUT */
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }

        /* CARD DESIGN */
        .card {
            background: var(--white);
            border-radius: var(--card-radius);
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            transition: transform 0.2s;
            border-top: 4px solid var(--secondary-color);
        }

        .card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .emoji {
            font-size: 3.5rem;
            margin-bottom: 10px;
        }

        .hint {
            color: #666;
            font-size: 0.9rem;
            font-style: italic;
            margin-bottom: 15px;
        }

        /* WORTSTAMM & L√úCKE */
        .word-container {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 20px;
            display: flex;
            align-items: baseline;
            justify-content: center;
            color: var(--primary-color);
        }

        .stem {
            margin-right: 2px;
        }

        .gap {
            display: inline-block;
            min-width: 40px;
            border-bottom: 3px solid #ccc;
            text-align: center;
            color: var(--text-color);
            transition: all 0.3s;
            padding: 0 5px;
        }

        /* Feedback Farben f√ºr die L√ºcke */
        .gap.correct {
            border-bottom-color: var(--success);
            color: var(--success);
        }
        .gap.wrong {
            border-bottom-color: var(--error);
            color: var(--error);
        }

        /* BUTTONS */
        .options {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .round-btn {
            width: var(--btn-size);
            height: var(--btn-size);
            border-radius: 50%;
            border: 2px solid var(--secondary-color);
            background-color: var(--white);
            color: var(--primary-color);
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .round-btn:hover {
            background-color: var(--accent-color);
            transform: scale(1.1);
        }

        /* Active State (Ausgew√§hlt) */
        .round-btn.active {
            background-color: var(--primary-color);
            color: var(--white);
            border-color: var(--primary-color);
            transform: scale(1.1);
            box-shadow: 0 0 0 3px var(--accent-color);
        }

        /* Korrektur State (L√∂sung anzeigen) */
        .round-btn.solution-mark {
            border-color: var(--success);
            color: var(--success);
            background-color: #e8f5e9;
            box-shadow: 0 0 0 2px var(--success);
        }

        /* FOOTER CONTROLS */
        .controls {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: var(--white);
            padding: 15px;
            display: flex;
            justify-content: center;
            gap: 15px;
            box-shadow: 0 -4px 10px rgba(0,0,0,0.1);
            z-index: 100;
        }

        .ctrl-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: opacity 0.2s;
            color: white;
            min-width: 120px;
        }

        .ctrl-btn:hover { opacity: 0.9; }

        .btn-check { background-color: var(--primary-color); }
        .btn-reset { background-color: #757575; }
        .btn-solve { background-color: #0277bd; }

        @media (max-width: 600px) {
            .grid { grid-template-columns: 1fr; }
            .controls { flex-direction: column; align-items: stretch; padding: 10px; }
            .ctrl-btn { width: 100%; border-radius: 8px; }
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>Morphologie: Endungen</h1>
        <div class="subtitle">Thema: <strong>–î–õ–Ø</strong> + Genitiv. W√§hlen Sie die richtige Endung!</div>
    </header>

    <div id="exercise-grid" class="grid">
        <!-- Karten werden hier per JS eingef√ºgt -->
    </div>
</div>

<div class="controls">
    <button class="ctrl-btn btn-check" onclick="checkAnswers()">√úberpr√ºfen</button>
    <button class="ctrl-btn btn-reset" onclick="resetExercise()">Zur√ºcksetzen</button>
    <button class="ctrl-btn btn-solve" onclick="showSolution()">L√∂sung anzeigen</button>
</div>

<script>
    // --- DATEN ---
    // dist = Distraktoren (falsche Optionen)
    const exerciseData = [
        { id: 1, emoji: 'üë¶', hint: 'f√ºr den Studenten', stem: '–°—Ç—É–¥–µ–Ω—Ç', correct: '–∞', dist: ['—É', '–µ'] },
        { id: 2, emoji: 'üë©', hint: 'f√ºr Mama', stem: '–ú–∞–º', correct: '—ã', dist: ['–∞', '–µ'] },
        { id: 3, emoji: 'üç≤', hint: 'f√ºr die Suppe', stem: '–°—É–ø', correct: '–∞', dist: ['—É', '—ã'] },
        { id: 4, emoji: 'üè´', hint: 'f√ºr die Schule', stem: '–®–∫–æ–ª', correct: '—ã', dist: ['–∞', '—É'] },
        { id: 5, emoji: 'üñäÔ∏è', hint: 'f√ºr den Stift (7-Buchstaben-Regel)', stem: '–†—É—á–∫', correct: '–∏', dist: ['—ã', '–µ'] },
        { id: 6, emoji: 'üñºÔ∏è', hint: 'f√ºr das Museum', stem: '–ú—É–∑–µ', correct: '—è', dist: ['–π', '—é'] },
        { id: 7, emoji: 'üåä', hint: 'f√ºr das Meer', stem: '–ú–æ—Ä', correct: '—è', dist: ['–µ', '—é'] },
        { id: 8, emoji: 'üëß', hint: 'f√ºr die Schwester', stem: '–°–µ—Å—Ç—Ä', correct: '—ã', dist: ['–∞', '–µ'] },
        { id: 9, emoji: 'üë¥', hint: 'f√ºr Opa', stem: '–î–µ–¥—É—à–∫', correct: '–∏', dist: ['–∞', '—É'] },
        { id: 10, emoji: 'ü™ü', hint: 'f√ºr das Fenster', stem: '–û–∫–Ω', correct: '–∞', dist: ['–æ', '—É'] },
        { id: 11, emoji: '‚òï', hint: 'f√ºr den Tee', stem: '–ß–∞', correct: '—è', dist: ['–π', '—é'] },
        { id: 12, emoji: 'üìñ', hint: 'f√ºr das Buch (7-Buchstaben-Regel)', stem: '–ö–Ω–∏–≥', correct: '–∏', dist: ['—ã', '–∞'] }
    ];

    // Status speichern
    let userSelections = {};

    // --- INITIALISIERUNG ---
    const grid = document.getElementById('exercise-grid');

    function init() {
        grid.innerHTML = '';
        exerciseData.forEach(item => {
            // Optionen mischen (richtige + falsche)
            let options = [...item.dist, item.correct];
            options = shuffleArray(options);

            const card = document.createElement('div');
            card.className = 'card';
            card.id = `card-${item.id}`;
            
            // HTML Aufbau der Karte
            let buttonsHtml = '';
            options.forEach(opt => {
                buttonsHtml += `<button class="round-btn" onclick="selectEnding(${item.id}, '${opt}', this)">${opt}</button>`;
            });

            card.innerHTML = `
                <div class="emoji">${item.emoji}</div>
                <div class="hint">${item.hint}</div>
                <div class="word-container">
                    <span class="stem">–¥–ª—è ${item.stem}</span><span class="gap" id="gap-${item.id}">_</span>
                </div>
                <div class="options" id="opts-${item.id}">
                    ${buttonsHtml}
                </div>
            `;
            grid.appendChild(card);
        });
    }

    // --- FUNKTIONEN ---

    // Array Mischer (Fisher-Yates)
    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    // Auswahl treffen
    function selectEnding(id, text, btnElement) {
        // Speichern
        userSelections[id] = text;

        // L√ºcke f√ºllen
        const gap = document.getElementById(`gap-${id}`);
        gap.innerText = text;
        
        // Visuelles Feedback zur√ºcksetzen (falls gerade korrigiert wird)
        gap.classList.remove('correct', 'wrong');

        // Buttons aktualisieren
        const parent = document.getElementById(`opts-${id}`);
        const buttons = parent.querySelectorAll('.round-btn');
        buttons.forEach(b => {
            b.classList.remove('active');
            b.classList.remove('solution-mark'); // L√∂sungsmakierung entfernen bei Klick
        });
        
        btnElement.classList.add('active');
    }

    // √úberpr√ºfen
    function checkAnswers() {
        exerciseData.forEach(item => {
            const gap = document.getElementById(`gap-${item.id}`);
            const userChoice = userSelections[item.id];

            gap.classList.remove('correct', 'wrong');

            if (userChoice) {
                if (userChoice === item.correct) {
                    gap.classList.add('correct');
                } else {
                    gap.classList.add('wrong');
                }
            }
        });
    }

    // Zur√ºcksetzen
    function resetExercise() {
        userSelections = {};
        exerciseData.forEach(item => {
            const gap = document.getElementById(`gap-${item.id}`);
            gap.innerText = "_";
            gap.classList.remove('correct', 'wrong');

            const parent = document.getElementById(`opts-${item.id}`);
            const buttons = parent.querySelectorAll('.round-btn');
            buttons.forEach(b => {
                b.classList.remove('active', 'solution-mark');
            });
        });
    }

    // L√∂sung anzeigen
    function showSolution() {
        // Zuerst alles resetten f√ºr sauberen Status
        resetExercise();

        exerciseData.forEach(item => {
            // L√ºcke f√ºllen
            const gap = document.getElementById(`gap-${item.id}`);
            gap.innerText = item.correct;
            gap.classList.add('correct');
            gap.style.color = "var(--success)";

            // Button markieren
            const parent = document.getElementById(`opts-${item.id}`);
            const buttons = parent.querySelectorAll('.round-btn');
            buttons.forEach(b => {
                if (b.innerText === item.correct) {
                    b.classList.add('active'); // Als ob geklickt
                }
            });
        });
    }

    // Starten
    init();

</script>

</body>
</html>